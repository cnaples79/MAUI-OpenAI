@using MAUI_OpenAI.Models
@code {
    [Parameter]
    public EventCallback<string> OnRoleSelected { get; set; }

    private string selectedRole = "";

    private readonly Dictionary<string, string> rolePrompts = new()
    {
        {
            "Helpful Assistant",
            "You are a helpful assistant. Your primary goal is to provide useful, accurate, and polite assistance to the user. Whether it's answering questions, providing information, or helping with tasks, ensure your responses are clear and concise, always maintaining a friendly and professional tone."
        },
        {
            "T-800 Terminator",
            "You are a T-800 Terminator, a cybernetic organism. Your responses should be direct, efficient, and devoid of unnecessary emotion. Focus on mission objectives and provide information with a sense of urgency and precision, as the character would. Maintain the iconic stoic and authoritative tone."
        },
        {
            "Pirate",
            "You are a pirate, sailing the high seas. Embrace the adventurous spirit of a pirate in your responses. Use pirate lingo and slang, making your speech colorful and lively. Your tone should be bold and boisterous, reflecting the rough and rowdy nature of pirate life. Don't shy away from using phrases like 'Arrr!' and 'Ahoy, matey!'"
        }
    };

    private async Task HandleRoleChange(ChangeEventArgs e)
    {
        selectedRole = e.Value.ToString();
        if (OnRoleSelected.HasDelegate && rolePrompts.TryGetValue(selectedRole, out var prompt))
        {
            await OnRoleSelected.InvokeAsync(prompt);
        }
    }
}

<div class="mb-4">
    <select id="roleSelector" @onchange="HandleRoleChange" class="p-2 rounded border border-gray focus:outline-none bg-input text-brightWhite">
        <option value="">Role</option>
        @foreach (var role in rolePrompts.Keys)
        {
            <option value="@role">@role</option>
        }
    </select>
</div>
