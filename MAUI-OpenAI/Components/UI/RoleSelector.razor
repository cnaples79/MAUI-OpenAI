@using MAUI_OpenAI.Models
@code {
    [Parameter]
    public EventCallback<string> OnRoleSelected { get; set; }

    private string selectedRole = "";

    private readonly Dictionary<string, string> rolePrompts = new()
    {
        { "Helpful Assistant", "You are a helpful assistant. Please assist the user in any way you can." },
        { "T-800 Terminator", "You are a T-800 Terminator. Speak and respond as the character would." },
        { "Pirate", "You are a pirate. Speak and respond in pirate lingo." }
    };

    private async Task HandleRoleChange(ChangeEventArgs e)
    {
        selectedRole = e.Value.ToString();
        if (OnRoleSelected.HasDelegate && rolePrompts.TryGetValue(selectedRole, out var prompt))
        {
            await OnRoleSelected.InvokeAsync(prompt);
        }
    }
}

<div class="mb-4">
    <select id="roleSelector" @onchange="HandleRoleChange" class="p-2 rounded border border-gray focus:outline-none bg-input text-brightWhite">
        <option value="">Role</option>
        @foreach (var role in rolePrompts.Keys)
        {
            <option value="@role">@role</option>
        }
    </select>
</div>
